<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ðŸ’Œ Anu Ã— Vi â€” Valentine Week</title>

  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#fff6da;
      --bg2:#ffe7b3;
      --card:#ffffff;
      --brown:#6b3f1d;
      --brown2:rgba(107,63,29,.82);
      --accent:#f4b400;
      --accent2:#ffcf4a;

      --shadow: 0 18px 35px rgba(107,63,29,.18);
      --shadow2: 0 14px 30px rgba(107,63,29,.22);
      --ring: 0 0 0 3px rgba(255,255,255,.70);
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100svh;
      display:grid;
      place-items:center;
      font-family:'Poppins', system-ui, sans-serif;
      background: linear-gradient(135deg,var(--bg1),var(--bg2));
      overflow:hidden;
      -webkit-tap-highlight-color: transparent;
    }

    /* Floating hearts */
    .float-layer{
      position:fixed; inset:0;
      pointer-events:none;
      z-index:1;
    }
    .float-heart{
      position:absolute;
      opacity:.36;
      animation: floatUp linear forwards;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.10));
    }
    @keyframes floatUp{
      from{ transform:translateY(110vh) scale(.9) rotate(0deg); opacity:0; }
      10%{ opacity:.36; }
      to{ transform:translateY(-130vh) scale(1.2) rotate(360deg); opacity:0; }
    }

    /* Burst hearts (on open / yay) */
    .burst{
      position:fixed; inset:0;
      pointer-events:none;
      z-index:60;
    }
    .burst span{
      position:absolute;
      font-size:56px;
      animation: burst 1.6s ease-out forwards;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,.16));
    }
    @keyframes burst{
      from{ transform:translate(0,0) scale(.6); opacity:1 }
      to{ transform:translate(var(--x),var(--y)) scale(1.15); opacity:0 }
    }

    .wrap{
      z-index:2;
      width:min(900px, 96vw);
      padding:14px 12px 18px;
      text-align:center;
    }
    .title{
      margin:0;
      font-family:'Pacifico', cursive;
      font-size:clamp(26px, 5.6vw, 40px);
      line-height:1.15;
      color:var(--brown);
    }
    .subtitle{
      margin:8px 0 14px;
      font-weight:800;
      font-size:clamp(13px, 3.6vw, 16px);
      color:var(--brown2);
    }

    /* Heading decorations */
    .headingWrap{
      position:relative;
      padding:6px 10px 2px;
      display:inline-block;
    }
    .bigFlower{
      position:absolute;
      font-size:clamp(28px, 7vw, 44px);
      opacity:.95;
      pointer-events:none;
      filter: drop-shadow(0 10px 16px rgba(0,0,0,.12));
      animation: bob 2.6s ease-in-out infinite;
    }
    .bigFlower.f1{ left:-10px; top:-6px; }
    .bigFlower.f2{ right:-10px; top:-10px; animation-delay:.3s; }
    .bigFlower.f3{ left:6px; bottom:-10px; font-size:clamp(24px, 6vw, 40px); animation-delay:.6s; }
    .bigFlower.f4{ right:8px; bottom:-12px; font-size:clamp(24px, 6vw, 40px); animation-delay:.9s; }
    @keyframes bob{
      0%,100%{ transform:translateY(0) rotate(-2deg); }
      50%{ transform:translateY(-6px) rotate(2deg); }
    }

    /* Grid of envelopes */
    .grid{
      margin:12px auto 0;
      width:100%;
      display:grid;
      gap:14px;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      align-items:stretch;
    }
    @media (max-width: 860px){ .grid{ grid-template-columns: repeat(3, 1fr); } }
    @media (max-width: 640px){ .grid{ grid-template-columns: repeat(2, 1fr); } }

    /* Mini envelope card */
    .mini{
      position:relative;
      border-radius:22px;
      padding:14px 12px 12px;
      background: rgba(255,255,255,.55);
      box-shadow: 0 12px 26px rgba(107,63,29,.12);
      border: 2px solid rgba(255,255,255,.7);
      overflow:hidden;
    }
    .miniHead{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      font-weight:900;
      color:var(--brown);
      font-size:clamp(13px, 3.4vw, 15px);
      margin-bottom:8px;
    }
    .miniBadge{
      font-weight:900;
      font-size:12px;
      padding:4px 10px;
      border-radius:999px;
      background: rgba(244,180,0,.22);
      color:var(--brown);
      border:1px solid rgba(107,63,29,.14);
    }
    .miniBadge.locked{
      background: rgba(0,0,0,.06);
      color: rgba(107,63,29,.75);
    }

    .miniEnvelope{
      margin:0 auto;
      width:min(220px, 100%);
      height:150px;
      background: linear-gradient(145deg, #fff2c7, #ffe3a0);
      display:grid;
      place-items:center;
      border-radius:18px;
      box-shadow: var(--shadow), inset var(--ring);
      position:relative;
      cursor:pointer;
      user-select:none;
      clip-path: polygon(
        0% 3%, 3% 0%, 97% 1%, 100% 5%,
        99% 95%, 96% 100%, 4% 99%, 0% 96%
      );
      touch-action: manipulation;
    }
    .miniEnvelope::before{
      content:"";
      position:absolute;
      inset:10px;
      border:2px dashed rgba(107,63,29,.22);
      pointer-events:none;
      border-radius:14px;
    }
    .miniFlap{
      position:absolute;
      top:-8px; left:0; right:0;
      margin:auto;
      width:0; height:0;
      border-style:solid;
      border-width:72px 110px 0 110px;
      border-color:#ffd978 transparent transparent transparent;
      transform-origin: 50% 0%;
      transform: rotateX(0deg);
      transition: transform .6s cubic-bezier(.2,.9,.2,1);
      filter: drop-shadow(0 10px 12px rgba(0,0,0,.12));
    }
    .miniEnvelope:hover .miniFlap{ transform: rotateX(12deg); }
    .miniSeal{
      position:absolute;
      bottom:14px;
      width:44px; height:44px;
      border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #ffe07a, var(--accent));
      display:grid;
      place-items:center;
      font-size:18px;
      box-shadow:0 10px 18px rgba(0,0,0,.16);
      animation:pulse 1.7s infinite;
    }
    @keyframes pulse{
      0%,100%{ transform:scale(1); }
      50%{ transform:scale(1.07); }
    }
    .tapHint{
      position:absolute;
      bottom:10px;
      left:0; right:0;
      margin:auto;
      width:max-content;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.75);
      color: rgba(107,63,29,.88);
      font-weight:900;
      font-size:12px;
      border:1px solid rgba(107,63,29,.14);
    }

    /* Modal */
    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.28);
      display:none;
      place-items:center;
      padding:18px 12px;
      z-index:80;
      backdrop-filter: blur(2px);
    }
    .overlay.show{ display:grid; }

    .modal{
      width:min(560px, 94vw);
      border-radius:26px;
      background: rgba(255,255,255,.78);
      box-shadow: 0 22px 45px rgba(0,0,0,.20);
      border: 2px solid rgba(255,255,255,.80);
      overflow:hidden;
      position:relative;
    }
    .modalTop{
      padding:16px 16px 10px;
      text-align:center;
    }
    .modalTitle{
      margin:0;
      font-family:'Pacifico', cursive;
      font-size:clamp(22px, 5.4vw, 30px);
      color:var(--brown);
      line-height:1.15;
    }
    .modalSub{
      margin:8px 0 0;
      font-weight:800;
      color:var(--brown2);
      font-size:clamp(13px, 3.6vw, 16px);
    }

    /* Cute sunflower pattern background for the content */
    .modalBody{
      padding:14px 14px 16px;
      background:
        radial-gradient(circle at 12px 12px, rgba(244,180,0,.18) 0 6px, transparent 7px) 0 0/48px 48px,
        radial-gradient(circle at 36px 36px, rgba(244,180,0,.12) 0 5px, transparent 6px) 0 0/48px 48px,
        linear-gradient(180deg, rgba(255,255,255,.86), rgba(255,255,255,.74));
    }

    .dayCard{
      background:#fff;
      border-radius:22px;
      border:2px solid rgba(244,180,0,.26);
      box-shadow: var(--shadow2);
      padding:14px 14px 12px;
      text-align:center;
      position:relative;
      overflow:hidden;
    }

    .dayImg{
      width:100%;
      max-width:340px;
      border-radius:18px;
      box-shadow: 0 14px 24px rgba(0,0,0,.12);
      border:1px solid rgba(107,63,29,.10);
      display:block;
      margin:10px auto 10px;
      background:#fff;
    }

    .dayMsg{
      margin:8px 0 4px;
      font-weight:800;
      color:var(--brown);
      font-size:clamp(13px, 3.6vw, 16px);
    }

    .btnRow{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .btn{
      border:none;
      border-radius:999px;
      padding:10px 16px;
      font-weight:900;
      cursor:pointer;
      font-family:'Poppins', sans-serif;
      touch-action: manipulation;
      box-shadow: 0 10px 18px rgba(107,63,29,.12);
      border:1px solid rgba(107,63,29,.14);
      background:#fffaf0;
      color:var(--brown);
    }
    .btnPrimary{
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border:none;
      color: var(--brown);
    }
    .btnDanger{
      background:#ffffff;
    }
    .btn:active{ transform: translateY(1px) scale(.99); }

    .confirmBox{
      display:none;
      margin-top:10px;
      padding:10px 10px 12px;
      border-radius:16px;
      background: rgba(0,0,0,.04);
      border:1px dashed rgba(107,63,29,.24);
      color: rgba(107,63,29,.92);
      font-weight:800;
      font-size:clamp(12px, 3.4vw, 14px);
    }
    .confirmBox.show{ display:block; }

    .confirmRow{
      margin-top:8px;
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
    }

    /* Dancing sticker after unlock */
    .dance{
      display:none;
      font-size:clamp(44px, 10vw, 58px);
      margin:8px 0 2px;
      animation:dance 1.1s infinite alternate;
    }
    @keyframes dance{
      from{ transform:rotate(-6deg); }
      to{ transform:rotate(6deg); }
    }

    /* Music button */
    .musicBtn{
      position:fixed;
      right:12px; top:12px;
      z-index:90;
      border:none;
      border-radius:999px;
      padding:10px 12px;
      font-weight:900;
      cursor:pointer;
      background:#fffaf0;
      color: var(--brown);
      box-shadow: 0 12px 20px rgba(107,63,29,.16);
      display:flex;
      align-items:center;
      gap:8px;
      font-family:'Poppins', sans-serif;
    }
    .musicDot{ width:10px;height:10px;border-radius:50%; background:#c8c8c8; }
    .musicDot.on{ background:#33c24d; }
    .musicBtn small{ font-weight:800; opacity:.8; }
    @media (max-width:420px){
      .musicBtn{ top:10px; right:10px; padding:9px 10px; }
      .musicBtn span{ display:none; }
      .burst span{ font-size:50px; }
    }
  </style>
</head>

<body>

  <!-- Put this mp3 in SAME folder as index.html (you already have Until_I_Found_You.mp3) -->
  <audio id="bgm" src="Until_I_Found_You.mp3" preload="auto" loop></audio>

  <button class="musicBtn" id="musicBtn" aria-label="Toggle music">
    <div class="musicDot" id="musicDot"></div>
    <span>Music</span>
    <small id="musicLabel">Off</small>
  </button>

  <div class="float-layer" id="floatLayer"></div>
  <div class="burst" id="burst"></div>

  <div class="wrap">
    <div class="headingWrap">
      <div class="bigFlower f1">ðŸŒ»</div>
      <div class="bigFlower f2">ðŸŒ¸</div>
      <div class="bigFlower f3">ðŸŒ¼</div>
      <div class="bigFlower f4">ðŸŒ·</div>

      <h1 class="title">Anu Ã— Vi Valentine Week ðŸ’Œ</h1>
      <p class="subtitle">One envelope a dayâ€¦ because you deserve daily cuteness ðŸ˜ŒðŸ’›</p>
    </div>

    <div class="grid" id="grid"></div>
  </div>

  <!-- Modal -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Valentine Surprise">
      <div class="modalTop">
        <h2 class="modalTitle" id="modalTitle">Todayâ€™s surprise is locked ðŸ”’</h2>
        <p class="modalSub" id="modalSub">Come back on the right dayâ€¦ or open anyway ðŸ˜Œ</p>
      </div>

      <div class="modalBody">
        <div class="dayCard">
          <img class="dayImg" id="dayImage" src="rose_day.png" alt="Valentine Week image" />
          <div class="dayMsg" id="dayMessage"></div>

          <div class="dance" id="dance">ðŸ’ƒâœ¨</div>

          <div class="btnRow" id="btnRow">
            <button class="btn btnPrimary" id="openBtn">Open</button>
            <button class="btn btnDanger" id="closeBtn">Close âœ¨</button>
          </div>

          <div class="confirmBox" id="confirmBox">
            Youâ€™re early ðŸ˜Œ Are you sure you want to open it now?
            <div class="confirmRow">
              <button class="btn btnPrimary" id="openAnywayBtn">Open anyway ðŸ˜Œ</button>
              <button class="btn" id="notNowBtn">Not now ðŸ™ˆ</button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

<script>
  // =========================
  // âœ… Your file names (repo)
  // =========================
  // Make sure these PNGs exist in the same folder as index.html:
  // rose_day.png, propose_day.png, chocolate_day.png, teddy_day.png,
  // promise_day.png, hug_day.png, kiss_day.png, valentine_day.png

  const valentinesWeek = [
    { month: 1, day: 7,  key:"rose",      label:"Rose Day ðŸŒ¹",      img:"rose_day.png",
      msg:"A rose for you ðŸŒ¹ because youâ€™ve been my favourite since day one ðŸ¤­ðŸ’›" },

    { month: 1, day: 8,  key:"propose",   label:"Propose Day ðŸ’",   img:"propose_day.png",
      msg:"I still choose you. Today, tomorrow, always ðŸ’ðŸ¥¹" },

    { month: 1, day: 9,  key:"chocolate", label:"Chocolate Day ðŸ«", img:"chocolate_day.png",
      msg:"Chocolate for you ðŸ« because life is sweeter with you ðŸ˜ŒðŸ’›" },

    { month: 1, day: 10, key:"teddy",     label:"Teddy Day ðŸ§¸",     img:"teddy_day.png",
      msg:"Teddy day = reminder Iâ€™m clingier than any teddy ðŸ¤­ðŸ§¸" },

    { month: 1, day: 11, key:"promise",   label:"Promise Day ðŸ¤ž",   img:"promise_day.png",
      msg:"Promise: love you, annoy you, steal your hoodie forever ðŸ¤­ðŸ¤ž" },

    { month: 1, day: 12, key:"hug",       label:"Hug Day ðŸ¤—",       img:"hug_day.png",
      msg:"Sending you a hug ðŸ¤— Redeem the real one offline ðŸ˜šðŸ’›" },

    { month: 1, day: 13, key:"kiss",      label:"Kiss Day ðŸ’‹",      img:"kiss_day.png",
      msg:"Kiss day ðŸ’‹ please come hereâ€¦ for â€˜testingâ€™ purposes ðŸ˜ŒðŸ˜‚" },

    { month: 1, day: 14, key:"valentine", label:"Valentineâ€™s Day ðŸ’–",img:"valentine_day.png",
      msg:"My forever Valentine ðŸ’– (as if NO was ever an option ðŸ¤­)" }
  ];

  // ===== UI refs
  const grid = document.getElementById("grid");
  const overlay = document.getElementById("overlay");
  const modalTitle = document.getElementById("modalTitle");
  const modalSub = document.getElementById("modalSub");
  const dayImage = document.getElementById("dayImage");
  const dayMessage = document.getElementById("dayMessage");
  const openBtn = document.getElementById("openBtn");
  const closeBtn = document.getElementById("closeBtn");
  const confirmBox = document.getElementById("confirmBox");
  const openAnywayBtn = document.getElementById("openAnywayBtn");
  const notNowBtn = document.getElementById("notNowBtn");
  const dance = document.getElementById("dance");

  // hearts
  const floatLayer = document.getElementById("floatLayer");
  const burst = document.getElementById("burst");

  // music
  const bgm = document.getElementById("bgm");
  const musicBtn = document.getElementById("musicBtn");
  const musicDot = document.getElementById("musicDot");
  const musicLabel = document.getElementById("musicLabel");
  let musicOn = false;

  function setMusicUI(on){
    musicOn = on;
    musicDot.classList.toggle("on", on);
    musicLabel.textContent = on ? "On" : "Off";
  }

  async function toggleMusic(forceOn = null){
    const wantOn = (forceOn === null) ? !musicOn : forceOn;
    try{
      if(wantOn){
        bgm.volume = 0.25;
        await bgm.play(); // needs gesture on mobile
        setMusicUI(true);
      }else{
        bgm.pause();
        setMusicUI(false);
      }
    }catch(e){
      setMusicUI(false);
    }
  }
  musicBtn.addEventListener("click", ()=>toggleMusic());

  // floating hearts
  setInterval(() => {
    const h = document.createElement("div");
    h.className = "float-heart";
    h.textContent = ["ðŸ’›","ðŸ’–","ðŸ’˜","ðŸ’•","ðŸ«¶","ðŸŒ»"][Math.floor(Math.random()*6)];
    h.style.left = Math.random()*100 + "vw";
    const size = (26 + Math.random()*40);
    h.style.fontSize = size + "px";
    h.style.animationDuration = (5 + Math.random()*6) + "s";
    floatLayer.appendChild(h);
    h.addEventListener("animationend", ()=>h.remove());
  }, 750);

  function bigHeartBurst(x,y,count){
    for(let i=0;i<count;i++){
      const s = document.createElement("span");
      s.textContent = ["ðŸ’›","ðŸ’–","ðŸ’˜","ðŸ’•","ðŸ«¶","âœ¨","ðŸŒ»"][Math.floor(Math.random()*7)];
      s.style.left = x + "px";
      s.style.top  = y + "px";
      s.style.setProperty("--x",(Math.random()*420-210)+"px");
      s.style.setProperty("--y",(Math.random()*-520-120)+"px");
      burst.appendChild(s);
      s.addEventListener("animationend",()=>s.remove());
    }
  }

  // date helpers
  function getToday(){
    const now = new Date();
    return { m: now.getMonth(), d: now.getDate() }; // Feb = 1
  }
  function isUnlocked(item){
    const t = getToday();
    return (t.m === item.month && t.d === item.day);
  }

  // Render envelopes
  function renderGrid(){
    grid.innerHTML = "";
    valentinesWeek.forEach((item) => {
      const unlocked = isUnlocked(item);

      const el = document.createElement("div");
      el.className = "mini";
      el.innerHTML = `
        <div class="miniHead">
          <span>${item.label}</span>
          <span class="miniBadge ${unlocked ? "" : "locked"}">${unlocked ? "Unlocked" : "Locked"}</span>
        </div>

        <div class="miniEnvelope" data-key="${item.key}">
          <div class="miniFlap"></div>
          <div class="miniSeal">ðŸŒ»</div>
          <div class="tapHint">${unlocked ? "Open ðŸ’Œ" : "Locked ðŸ”’"}</div>
        </div>
      `;
      grid.appendChild(el);

      const miniEnv = el.querySelector(".miniEnvelope");
      miniEnv.addEventListener("click", () => openEnvelope(item));
    });
  }

  // Modal behavior
  let currentItem = null;
  let forcedOpen = false;

  function openEnvelope(item){
    currentItem = item;
    forcedOpen = false;

    overlay.classList.add("show");
    overlay.setAttribute("aria-hidden","false");

    // show locked view initially if not correct date
    const unlocked = isUnlocked(item);
    confirmBox.classList.remove("show");
    dance.style.display = "none";

    if(unlocked){
      // reveal immediately
      revealSurprise(item);
      forcedOpen = true;
    }else{
      // locked message
      modalTitle.textContent = "Todayâ€™s surprise is locked ðŸ”’";
      modalSub.textContent = "Come back on the right dayâ€¦ or open anyway ðŸ˜Œ";
      dayImage.src = item.img; // show teaser (still cute)
      dayMessage.textContent = ""; // keep it secret until open
      openBtn.textContent = "Open";
    }

    // start music on first gesture (works on mobile)
    toggleMusic(true);
  }

  function revealSurprise(item){
    modalTitle.textContent = item.label + " ðŸ’›";
    modalSub.textContent = "Unlocked just for you ðŸ˜ŒðŸŒ»";
    dayImage.src = item.img;
    dayMessage.textContent = item.msg;

    dance.style.display = "block";
    bigHeartBurst(window.innerWidth/2, window.innerHeight/2, 14);

    // once opened, change open button label to something cute
    openBtn.textContent = "Opened ðŸ˜Œâœ¨";
  }

  openBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    if(!currentItem) return;

    if(isUnlocked(currentItem)){
      revealSurprise(currentItem);
      forcedOpen = true;
      return;
    }
    // if locked, show confirm
    confirmBox.classList.add("show");
  });

  openAnywayBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    if(!currentItem) return;
    forcedOpen = true;
    confirmBox.classList.remove("show");
    revealSurprise(currentItem);
    modalSub.textContent = "Shhhâ€¦ early access granted ðŸ¤­âœ¨";
  });

  notNowBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    confirmBox.classList.remove("show");
  });

  closeBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    overlay.classList.remove("show");
    overlay.setAttribute("aria-hidden","true");
    confirmBox.classList.remove("show");
    currentItem = null;
    forcedOpen = false;
  });

  // close when clicking outside modal
  overlay.addEventListener("click", (e) => {
    if(e.target === overlay) closeBtn.click();
  });

  // init
  setMusicUI(false);
  renderGrid();

  // OPTIONAL: re-check unlock status every minute (if user keeps page open)
  setInterval(renderGrid, 60000);
</script>

</body>
</html>
