<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>ðŸŒ» Anu Ã— Vi â€” Valentine Week</title>

<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600;700;800;900&display=swap" rel="stylesheet">

<style>
  :root{
    --bg1:#fff7dc;
    --bg2:#ffe7b3;
    --brown:#6b3f1d;
    --accent:#f4b400;
    --accent2:#ffcf4a;

    --cardRadius: 22px;
  }
  *{ box-sizing:border-box; }
  body{
    margin:0;
    min-height:100svh;
    display:grid;
    place-items:center;
    font-family:'Poppins', sans-serif;
    background: linear-gradient(135deg,var(--bg1),var(--bg2));
    overflow-x:hidden;
    overflow-y:auto;
    -webkit-tap-highlight-color: transparent;
  }

  /* Floating hearts */
  .float-layer{
    position:fixed; inset:0;
    pointer-events:none;
    z-index:1;
  }
  .float-heart{
    position:absolute;
    opacity:.40;
    animation: floatUp linear forwards;
    filter: drop-shadow(0 10px 18px rgba(0,0,0,.10));
  }
  @keyframes floatUp{
    from{ transform:translateY(110vh) scale(.9) rotate(0deg); opacity:0; }
    10%{ opacity:.40; }
    to{ transform:translateY(-130vh) scale(1.2) rotate(360deg); opacity:0; }
  }

  /* Top header */
  .wrap{
    position:relative;
    z-index:2;
    width:min(980px, 96vw);
    padding:16px 12px 28px;
    text-align:center;
  }

  .titleRow{
    position:relative;
    margin-top:6px;
    padding:10px 6px;
  }
  .title{
    margin:0;
    font-family:'Pacifico', cursive;
    font-size:clamp(26px, 5.5vw, 38px);
    color:var(--brown);
    line-height:1.1;
  }
  .subtitle{
    margin:8px 0 0;
    font-weight:800;
    font-size:clamp(13px, 3.4vw, 16px);
    color: rgba(107,63,29,.85);
  }

  /* Big flowers around heading (kept away from text) */
  .flower{
    position:absolute;
    font-size:clamp(34px, 7vw, 56px);
    filter: drop-shadow(0 10px 18px rgba(0,0,0,.12));
    opacity:.95;
    pointer-events:none;
    animation: bob 2.8s ease-in-out infinite;
  }
  .flower.f1{ left:-2px; top:-6px; }
  .flower.f2{ right:-2px; top:-10px; animation-delay:.3s; }
  .flower.f3{ left:14px; bottom:-14px; animation-delay:.6s; }
  .flower.f4{ right:14px; bottom:-14px; animation-delay:.9s; }
  @keyframes bob{
    0%,100%{ transform: translateY(0) rotate(-2deg); }
    50%{ transform: translateY(-7px) rotate(2deg); }
  }

  /* Grid of envelopes */
  .grid{
    margin:18px auto 0;
    display:grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap:14px;
  }

  @media (max-width: 940px){
    .grid{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
  }
  @media (max-width: 680px){
    .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
  }

  .dayCard{
    position:relative;
    background: rgba(255,255,255,.55);
    border:2px solid rgba(244,180,0,.25);
    border-radius: var(--cardRadius);
    padding:12px;
    box-shadow: 0 14px 30px rgba(107,63,29,.12);
    overflow:hidden;
  }

  .miniEnvelope{
    position:relative;
    width:100%;
    height:130px;
    border-radius:18px;
    background: linear-gradient(145deg, #fff2c7, #ffe3a0);
    box-shadow:
      0 14px 26px rgba(107,63,29,.14),
      inset 0 0 0 3px rgba(255,255,255,.70);
    clip-path: polygon(
      0% 3%, 3% 0%, 97% 1%, 100% 5%,
      99% 95%, 96% 100%, 4% 99%, 0% 96%
    );
    display:grid;
    place-items:center;
    cursor:pointer;
    user-select:none;
    touch-action: manipulation;
  }
  .miniEnvelope:active{ transform: scale(.995); }

  .miniFlap{
    position:absolute;
    top:-8px; left:0; right:0; margin:auto;
    width:0; height:0;
    border-style:solid;
    border-width: 62px 90px 0 90px;
    border-color:#ffd978 transparent transparent transparent;
    filter: drop-shadow(0 10px 12px rgba(0,0,0,.10));
  }

  .miniSeal{
    position:absolute;
    bottom:14px;
    width:44px; height:44px;
    border-radius:50%;
    display:grid; place-items:center;
    background: radial-gradient(circle at 30% 30%, #ffe07a, var(--accent));
    box-shadow:0 10px 20px rgba(0,0,0,.18);
    font-size:18px;
  }

  .dayName{
    margin:10px 0 0;
    font-weight:900;
    color:var(--brown);
    font-size:14px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:8px;
  }
  .tag{
    font-weight:900;
    font-size:12px;
    padding:6px 10px;
    border-radius:999px;
    border:1px solid rgba(107,63,29,.18);
    background:#fffaf0;
    color:rgba(107,63,29,.9);
    white-space:nowrap;
  }
  .tag.locked{
    background:#f3f3f3;
    color:#777;
  }

  /* Modal */
  .modalBack{
    position:fixed; inset:0;
    background: rgba(0,0,0,.35);
    display:none;
    align-items:center;
    justify-content:center;
    padding:14px;
    z-index:100;
  }
  .modalBack.show{ display:flex; }

  .modal{
    width:min(560px, 96vw);
    background: rgba(255,255,255,.92);
    border-radius: 26px;
    border:2px solid rgba(244,180,0,.28);
    box-shadow: 0 20px 60px rgba(0,0,0,.22);
    overflow:hidden;
  }

  .modalHeader{
    padding:14px 14px 10px;
    text-align:center;
    background: linear-gradient(135deg, rgba(255,231,179,.55), rgba(255,247,220,.55));
    border-bottom:1px solid rgba(107,63,29,.12);
  }
  .modalTitle{
    margin:0;
    font-family:'Pacifico', cursive;
    font-size:clamp(22px, 4.8vw, 30px);
    color:var(--brown);
    line-height:1.1;
  }
  .modalSub{
    margin:6px 0 0;
    font-weight:800;
    color: rgba(107,63,29,.8);
    font-size:clamp(12px, 3.4vw, 14px);
  }

  .modalBody{
    padding:14px;
    text-align:center;
  }

  /* Sunflower pattern background for image frame */
  .imgFrame{
    position:relative;
    border-radius: 20px;
    padding:16px;
    background:
      radial-gradient(circle at 18px 18px, rgba(244,180,0,.22) 2px, transparent 3px) 0 0/34px 34px,
      radial-gradient(circle at 18px 18px, rgba(255,105,180,.14) 2px, transparent 3px) 17px 17px/34px 34px,
      linear-gradient(135deg, #fffdf6, #fff2d7);
    border:2px solid rgba(244,180,0,.22);
  }

  .dayImg{
    width:min(360px, 78vw);
    max-height:46vh;
    object-fit:contain;
    border-radius:16px;
    box-shadow: 0 16px 30px rgba(107,63,29,.18);
    display:block;
    margin:0 auto;
    background:#fff;
  }

  .msg{
    margin:12px auto 0;
    font-weight:900;
    color:var(--brown);
    font-size:clamp(13px, 3.6vw, 15px);
    max-width:48ch;
    line-height:1.35;
  }

  .actions{
    display:flex;
    gap:10px;
    justify-content:center;
    flex-wrap:wrap;
    margin-top:12px;
  }
  .btn{
    border:none;
    border-radius:999px;
    padding:10px 16px;
    font-weight:900;
    cursor:pointer;
    font-family:'Poppins', sans-serif;
    box-shadow: 0 10px 18px rgba(107,63,29,.12);
    touch-action: manipulation;
  }
  .btn.primary{
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color:var(--brown);
  }
  .btn.ghost{
    background:#fffaf0;
    border:2px solid rgba(107,63,29,.18);
    color:var(--brown);
  }

  /* ðŸŽµ Music button */
  .musicBtn{
    position:fixed;
    right:12px;
    top:12px;
    z-index:120;
    border:none;
    border-radius:999px;
    padding:10px 12px;
    font-weight:900;
    cursor:pointer;
    background:#fffaf0;
    color: var(--brown);
    box-shadow: 0 10px 18px rgba(107,63,29,.16);
    display:flex;
    align-items:center;
    gap:8px;
    font-family:'Poppins', sans-serif;
  }
  .musicDot{
    width:10px;height:10px;border-radius:50%;
    background:#c8c8c8;
  }
  .musicDot.on{ background:#33c24d; }

  @media (max-width: 420px){
    .musicBtn{ top:10px; right:10px; padding:9px 10px; }
    .musicBtn span{ display:none; }
  }
</style>
</head>

<body>
<div class="float-layer" id="floatLayer"></div>

<!-- Music -->
<audio id="bgm" src="Until_I_Found_You.mp3" preload="auto" loop></audio>
<button class="musicBtn" id="musicBtn" aria-label="Toggle music">
  <div class="musicDot" id="musicDot"></div>
  <span>Music</span>
  <small id="musicLabel" style="font-weight:900;opacity:.75;">Off</small>
</button>

<div class="wrap">
  <div class="titleRow">
    <div class="flower f1">ðŸŒ»</div>
    <div class="flower f2">ðŸŒ¸</div>
    <div class="flower f3">ðŸŒ¸</div>
    <div class="flower f4">ðŸŒ»</div>

    <h1 class="title">Anu Ã— Vi Valentine Week ðŸ’Œ</h1>
    <p class="subtitle">8 tiny envelopes. 8 days. Unlimited cute. ðŸ˜ŒðŸ’›</p>
  </div>

  <div class="grid" id="grid"></div>
</div>

<!-- Modal -->
<div class="modalBack" id="modalBack" role="dialog" aria-modal="true">
  <div class="modal">
    <div class="modalHeader">
      <h2 class="modalTitle" id="modalTitle">Todayâ€™s surprise is locked ðŸ”’</h2>
      <p class="modalSub" id="modalSub">Come back on the right dayâ€¦ or open anyway ðŸ˜Œ</p>
    </div>

    <div class="modalBody">
      <div class="imgFrame" id="imgFrame">
        <!-- IMPORTANT: image is hidden until unlocked OR "open anyway" -->
        <img class="dayImg" id="dayImg" alt="Valentine day surprise" style="display:none;" />
        <div class="msg" id="msg"></div>

        <div class="actions">
          <button class="btn primary" id="openAnywayBtn" style="display:none;">Open anyway ðŸ˜Œ</button>
          <button class="btn primary" id="openBtn" style="display:none;">Open ðŸ’›</button>
          <button class="btn ghost" id="closeBtn">Close âœ¨</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // ---------- DATA (FILES MUST MATCH YOUR REPO NAMES) ----------
  const DAYS = [
    { key:"rose",      label:"Rose Day ðŸŒ¹",      date:{m:2,d:7},  img:"rose_day.png",
      msg:"Rose Day = official permission to be extra cheesy ðŸŒ¹ðŸ˜Œ One rose todayâ€¦ and my whole heart daily." },

    { key:"propose",   label:"Propose Day ðŸ’",   date:{m:2,d:8},  img:"propose_day.png",
      msg:"Propose Day ðŸ’: Iâ€™d choose you in every universeâ€¦ and in every mood swing too ðŸ¤­ðŸ’•" },

    { key:"chocolate", label:"Chocolate Day ðŸ«", date:{m:2,d:9},  img:"chocolate_day.png",
      msg:"Chocolate Day ðŸ«: Sweet treat for youâ€¦ and a reminder that Iâ€™m still your best decision ðŸ˜ŒðŸ’›" },

    { key:"teddy",     label:"Teddy Day ðŸ§¸",     date:{m:2,d:10}, img:"teddy_day.png",
      msg:"Teddy Day ðŸ§¸: If you ever feel low, rememberâ€¦ youâ€™re my favourite comfort person ðŸ¥¹ðŸ’›" },

    { key:"promise",   label:"Promise Day ðŸ¤",   date:{m:2,d:11}, img:"promise_day.png",
      msg:"Promise Day ðŸ¤: I promise to love youâ€¦ even when you steal my fries. Especially then. ðŸŸðŸ¤­" },

    { key:"hug",       label:"Hug Day ðŸ¤—",       date:{m:2,d:12}, img:"hug_day.png",
      msg:"Hug Day ðŸ¤—: Consider this a long, tight hugâ€¦ with bonus forehead kiss loadingâ€¦ ðŸ˜šðŸ’›" },

    { key:"kiss",      label:"Kiss Day ðŸ˜˜",      date:{m:2,d:13}, img:"kiss_day.png",
      msg:"Kiss Day ðŸ˜˜: One kiss to reset the dayâ€¦ and one more because youâ€™re cute. ðŸ˜ŒðŸ’•" },

    { key:"valentine", label:"Valentineâ€™s Day ðŸ’›",       date:{m:2,d:14},img:"valentines_day.png",
      msg:"Valentineâ€™s Day ðŸ’›: Final boss day ðŸ˜Œâœ¨ You + Me = Forever subscription (no cancellation). ðŸ¤­" },
  ];

  // ---------- HELPERS ----------
  const $ = (id)=>document.getElementById(id);

  function todayLocal(){
    const t = new Date();
    return { y:t.getFullYear(), m:t.getMonth()+1, d:t.getDate() };
  }
  function isCorrectDate(day){
    const t = todayLocal();
    return (t.m === day.date.m && t.d === day.date.d);
  }

  // ---------- RENDER GRID ----------
  const grid = $("grid");
  function renderGrid(){
    grid.innerHTML = "";
    DAYS.forEach((day)=>{
      const unlocked = isCorrectDate(day);

      const card = document.createElement("div");
      card.className = "dayCard";

      card.innerHTML = `
        <div class="miniEnvelope" data-key="${day.key}">
          <div class="miniFlap"></div>
          <div class="miniSeal">ðŸŒ»</div>
        </div>

        <div class="dayName">
          <span>${day.label}</span>
          <span class="tag ${unlocked ? "" : "locked"}">${unlocked ? "Unlocked âœ…" : "Locked ðŸ”’"}</span>
        </div>
      `;

      card.querySelector(".miniEnvelope").addEventListener("click", () => openDay(day));
      grid.appendChild(card);
    });
  }

  // ---------- MODAL LOGIC (IMAGE SHOWN ONLY AFTER OPEN/OPEN ANYWAY) ----------
  const modalBack = $("modalBack");
  const modalTitle = $("modalTitle");
  const modalSub = $("modalSub");
  const dayImg = $("dayImg");
  const msg = $("msg");
  const openAnywayBtn = $("openAnywayBtn");
  const openBtn = $("openBtn");
  const closeBtn = $("closeBtn");

  let currentDay = null;
  let revealed = false;

  function resetModal(){
    revealed = false;
    dayImg.style.display = "none";
    dayImg.src = "";
    msg.textContent = "";
    openAnywayBtn.style.display = "none";
    openBtn.style.display = "none";
  }

  function showModal(){
    modalBack.classList.add("show");
  }
  function hideModal(){
    modalBack.classList.remove("show");
    resetModal();
    currentDay = null;
  }

  function revealSurprise(day, mode){
    // mode: "correct" | "anyway"
    revealed = true;

    // Show image + message
    dayImg.src = day.img;
    dayImg.style.display = "block";
    msg.textContent = day.msg;

    // Header text changes when opened
    if(mode === "correct"){
      modalTitle.textContent = `${day.label} unlocked ðŸ˜Œâœ¨`;
      modalSub.textContent = "Ok fineâ€¦ you earned this cuteness ðŸ’›";
    }else{
      modalTitle.textContent = "Shhhâ€¦ early peek unlocked ðŸ¤«ðŸ’•";
      modalSub.textContent = "Because youâ€™re cute, Iâ€™ll allow it ðŸ˜Œ";
    }

    openAnywayBtn.style.display = "none";
    openBtn.style.display = "none";
  }

  function openDay(day){
    currentDay = day;
    resetModal();
    showModal();

    const unlocked = isCorrectDate(day);

    if(unlocked){
      // correct date -> show Open button (still keeps image hidden until click)
      modalTitle.textContent = "Todayâ€™s surprise is ready ðŸ’›";
      modalSub.textContent = "Click Open ðŸ˜Œâœ¨";

      openBtn.style.display = "inline-block";
      openBtn.onclick = () => revealSurprise(day, "correct");
    }else{
      // locked -> show Open anyway button, image hidden until click
      modalTitle.textContent = "Todayâ€™s surprise is locked ðŸ”’";
      modalSub.textContent = "Come back on the right dayâ€¦ or open anyway ðŸ˜Œ";

      openAnywayBtn.style.display = "inline-block";
      openAnywayBtn.onclick = () => revealSurprise(day, "anyway");
    }

    // try start music on first user interaction
    toggleMusic(true);
  }

  closeBtn.addEventListener("click", hideModal);
  modalBack.addEventListener("click", (e)=>{
    if(e.target === modalBack) hideModal();
  });

  // ---------- FLOATING HEARTS ----------
  const floatLayer = $("floatLayer");
  setInterval(() => {
    const h = document.createElement("div");
    h.className = "float-heart";
    h.textContent = ["ðŸ’›","ðŸ’–","ðŸ’˜","ðŸ’•","ðŸ«¶","ðŸŒ»","ðŸŒ¸"][Math.floor(Math.random()*7)];
    h.style.left = Math.random()*100 + "vw";
    h.style.fontSize = (24 + Math.random()*50) + "px";
    h.style.animationDuration = (5 + Math.random()*6) + "s";
    floatLayer.appendChild(h);
    h.addEventListener("animationend",()=>h.remove());
  }, 650);

  // ---------- MUSIC ----------
  const bgm = $("bgm");
  const musicBtn = $("musicBtn");
  const musicDot = $("musicDot");
  const musicLabel = $("musicLabel");
  let musicOn = false;

  function setMusicUI(on){
    musicOn = on;
    musicDot.classList.toggle("on", on);
    musicLabel.textContent = on ? "On" : "Off";
  }

  async function toggleMusic(forceOn = null){
    const wantOn = (forceOn === null) ? !musicOn : forceOn;
    try{
      if(wantOn){
        bgm.volume = 0.25;
        await bgm.play(); // mobile requires user gesture
        setMusicUI(true);
      }else{
        bgm.pause();
        setMusicUI(false);
      }
    }catch(e){
      setMusicUI(false);
    }
  }
  musicBtn.addEventListener("click", () => toggleMusic());

  // ---------- INIT ----------
  renderGrid();
  setMusicUI(false);
</script>
</body>
</html>
